-- æ•°å­—ã®è¨­å®šï¼ˆã“ã“ã«0ã¾ãŸã¯1ã‚’è¨­å®šã—ã¦ãã ã•ã„ï¼‰
maintenanceFlag = 0  -- 1ã‚’ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰ã€0ã‚’é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã¨ã—ã¦è¨­å®š
maintenanceFlag = tonumber(gg.makeRequest("").content)

-- Discord Webhookã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹é–¢æ•°
function sendDiscordError(message)
    local webhookUrl = "https://discord.com/api/webhooks/1226442919356010546/YEjnxLekVS6PiVDOfj6yK4MoB9CaSwpDXmAvx2mXV97JOqYrZe9EZp1s7nbyhcXAJRPP"
    local payload = string.format('{"content": "%s"}', message)
    gg.makeRequest(webhookUrl, nil, payload)
end

function Main()
    -- æ•°å­—ãŒ1ã®å ´åˆã¯ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã¦çµ‚äº†
    if maintenanceFlag == 1 then
        gg.alert("ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ã§ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚")
        os.exit()
    end

    -- æ•°å­—ãŒ0ã®å ´åˆã¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤º
    if maintenanceFlag == 0 then
        local Ax = gg.choice({
            "â¡ï¸ã‚¸ãƒ£ãƒ³ãƒ«åˆ†ã‘ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã€‚â¬…ï¸",
            "âŒâ“æº–å‚™ä¸­â“âŒ",
            "Î²ãƒ†ã‚¹ãƒˆç‰ˆ",
            "ğŸ‘¬ã¿ã‚“ãªã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆ",
            "âŒçµ‚äº†ğŸ”š"
        }, nil, "ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¢ã‚¯ã‚»ã‚¹(æ›´æ–°æ—¥2024/06/25)")

        if Ax ~= nil then
            if Ax == 1 then
                api = gg.makeRequest("")
                if api == nil or api.content == nil then
                    gg.alert("ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚")
                    sendDiscordError("ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚")
                    os.exit()
                else
                    gg.alert("ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ­£å¸¸ã«å–å¾—ã—ã¾ã—ãŸã€‚")
                end
                success, loadedScript = pcall(load(api.content))
                if success == false then
                    local errorMessage = string.format("ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®èª­ã¿è¾¼ã¿ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: %s", loadedScript)
                    sendDiscordError(errorMessage)
                    os.exit()
                end
            end

            if Ax == 2 then
gg.alert("æº–å‚™ä¸­")
end

            if Ax == 3 then
              local api = gg.makeRequest("")
                if not pcall(load(api.content)) then
                    gg.alert("ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã®èª­ã¿è¾¼ã¿ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚")
                end
            end

            if Ax == 4 then
                local api = gg.makeRequest("")
                if not pcall(load(api.content)) then
                end
            end

            if Ax == 5 then
                os.exit()
            end
        end
    end
end

-- ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—
while true do
    if gg.isVisible(true) then
        Lext = 1
        gg.setVisible(false)
    end
    if Lext == 1 then
        Main()
        Lext = -1
    end
end
